buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'de.richsource.gradle.plugins:gwt-gradle-plugin:0.6'
    }
}

allprojects {
    task magic << { 
        task -> println "Running magic task on $task.project.name"
    }
}

subprojects {
    apply plugin: 'java'
    apply plugin: 'eclipse'

    version = '0.2'

    magic << {
        println "Setting up eclipse for project"
    }
    magic.dependsOn cleanEclipseProject
    magic.dependsOn eclipseProject
    magic.dependsOn cleanEclipseClasspath
    magic.dependsOn eclipseClasspath

    repositories {
        jcenter()
        maven {
            url "https://github.com/juckele/juckele-mvn-repo/raw/master/releases"
        }
    }

    dependencies {
    }
}

project(':core') {
    dependencies {
        compile 'org.json:json:20140107'
        compile 'org.javatuples:javatuples:1.2'
        testCompile group: 'junit', name: 'junit', version: '4.+'
        testCompile group: 'com.johnuckele', name: 'vtest', version: '0.9.1'
    }
}

project(':webvisualizer') {
    apply plugin: 'war'
    apply plugin: 'gwt'

    gwt {
    	modules 'VivariumWeb'
    }

    dependencies {
        compile 'com.google.gwt:gwt:2.7.0'
        compile 'com.google.gwt:gwt-user:2.7.0'
        compile 'com.google.gwt:gwt-dev:2.7.0'
        compile project(':core')
    }
}
